source: https://github.com/entigolabs/entigo-infralib-release
base_config:
  profile: biz
steps:
  - name: infrastructure
    workspace: test
    modules:
      - name: dns
        inputs:
          parent_zone_id: "Z07983041XRLSLZUTHHDY"
      - name: eks
        inputs:
          eks_cluster_public: true
  - name: helm
    workspace: test
    modules:
      - name: argocd
        inputs:
          hostname: "argocd.{{ ssm.infrastructure.dns.int_domain }}"
          ingress_group_name: "external"
          ingress_scheme: "internet-facing"
  - name: mycustomtf
    type: terraform-custom
    workspace: test
    vpc_prefix: network-vpc
    approve: never
  - name: applications
    workspace: test
    modules:
      - name: istio-gateway
        inputs:
          domain: "*.{{ ssm.infrastructure.dns.pub_domain }}"

