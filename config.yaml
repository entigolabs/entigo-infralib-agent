source: https://github.com/entigolabs/entigo-infralib-release
base_config:
  profile: biz
steps:
  - name: infrastructure
    workspace: test
    provider:
      aws:
        ignore_tags:
          key_prefixes:
          - ignorebeginning
          keys:
          - ignorekey
          - barkey
        default_tags:
          tags:
            this: here
      kubernetes:
        ignore_annotations:
        - wooogooo
        - anohterannotation
        ignore_labels:
        -  some.tag.key
        -  anothertag
    modules:
      - name: dns
        inputs:
          vpc_prefix: "ep-network-vpc"
          parent_zone_id: "Z07983041XRLSLZUTHHDY"
      - name: eks
        inputs:
          eks_cluster_public: true
      - name: argocd
        inputs:
          hostname: "argocd.ep-infrastructure-dns-test.infralib.entigo.io"
          ingress_group_name: "external"
          ingress_scheme: "internet-facing"
  - name: applications
    workspace: test
    modules:
      - name: istio-gateway
        inputs:
          domain: "*.ep-test.infralib.entigo.io"
          altdomain:
            - "*.something.ep-test.infralib.entigo.io"
  - name: mycustomtf
    type: terraform-custom
    workspace: test
    vpc_prefix: network-vpc
    approve: never
